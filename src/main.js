const Rx="item>\\s*<title>(?<name>.+?)</title>[\\s\\S]*?<link>(?:<!\\[CDATA\\[)?(?<link>.+?)(?:\\]\\]>)?<[\\s\\S]+?pubDate>(?<date>.+?)<[\\s\\S]+?(?<desc><description>[\\s\\S]+?</description>)";var y=[],bc="#333";function rf(e,t,n){const l=new XMLHttpRequest;l.overrideMimeType(t),l.open("GET",e,!0),l.onload=()=>{4===l.readyState&&"200"==l.status&&n(l)},l.send(null)}function lf(e,t,n,l){var[a,o,r]=t,r=r||"";const s=new DOMParser,d=document.createElement.bind(document);var c=d("details");c.appendChild(d("summary")).appendChild(document.createTextNode(e));let m=function(e){o||(o=Rx);for(var t,a,i,m,k,u=e.responseText.matchAll(new RegExp(o,"g")),p=d("ul"),g=0,h=!1;!(i=u.next()).done&&g++<30;)m=i.value.groups,(t=p.appendChild(d("li")).appendChild(d("a"))).className="tooltipBox",t.href=s.parseFromString(r+m.link,"text/html").documentElement.textContent,t.appendChild(document.createTextNode(s.parseFromString(m.name,"text/html").documentElement.textContent)),(a=t.appendChild(d("textarea"))).className="tooltipText",a.setAttribute("readonly","true"),a.appendChild(document.createTextNode(m.date)),m.desc&&(k=s.parseFromString(m.desc,"text/html"),k=s.parseFromString(k.documentElement.textContent.trim(),"text/html"),a.appendChild(document.createTextNode("\n\n"+k.documentElement.textContent))),(!l||new Date(m.date)>=l)&&(t.style.color="cyan",h=!0);h&&(c.appendChild(p),n.appendChild(c))};if(Array.isArray(a))for(i=a.length;i--;)rf(a[i],"text/xml",m);else rf(a,"text/xml",m)}function ff(e){return/^(edge|file)/.test(e)?"":(s=e.slice(8).indexOf("/"),s>-1&&(e=e.slice(0,s+9)),"https://www.google.com/s2/favicons?domain="+e)}function x(e){for(var t=document.getElementById("quick-links"),n=0;n<e.length;n++){var l=document.createElement("div");l.className="bookmark";var a=l.appendChild(document.createElement("a"));a.href=e[n].url,a.style.background="url("+e[n].favIconUrl+") no-repeat center center",a.title=e[n].url,t.appendChild(l),y.push(e[n].url)}}function q(e){const t=document.createElement.bind(document),n=document.getElementById("sidebar");var l=t("ul");nQuickLinks=y.length;for(var a=0;a<e.length;a++){var o=e[a].hasOwnProperty("tab")?e[a].tab:e[a];if(o.hasOwnProperty("url")&&!o.url.startsWith("chrome.//")){for(var r=o.url.includes.bind(o.url),i=0;i<nQuickLinks;i++)r(y[i]);var s=l.appendChild(t("li")).appendChild(t("a"));s.href=o.url,s.appendChild(document.createTextNode(o.title));var d=new Image;d.src=o.favIconUrl?o.favIconUrl:ff(o.url),s.insertAdjacentElement("afterbegin",d)}}n.appendChild(l)}function ab(e){e.preventDefault();let t=e.target,n=document.createElement("a"),l=document.createElement("a");n.href=t.querySelector('[placeholder="URL"]').value,l.href=t.querySelector('[placeholder="Ikooni URL"]').value;let a={url:n.href,favIconUrl:l.href};x([a]);let o=JSON.parse(localStorage.getItem("quick-links"));o.push(a),localStorage.setItem("quick-links",JSON.stringify(o))}function mb(e){e.preventDefault();let t=document.getElementById("quick-links"),n=t.childNodes;for(var l=0;n[++l]!=e.currentTarget;);if(l>1){let e=t.removeChild(n[l]);t.insertBefore(e,n[l-1]);let a=JSON.parse(localStorage.getItem("quick-links"));[a[l-1],a[l-2]]=[a[l-2],a[l-1]],localStorage.setItem("quick-links",JSON.stringify(a))}}function db(e){e.preventDefault();let t=document.getElementById("quick-links"),n=t.childNodes;for(var l=0;n[++l]!=e.currentTarget;);t.removeChild(n[l]);let a=JSON.parse(localStorage.getItem("quick-links"));a.splice(l-1,1),localStorage.setItem("quick-links",JSON.stringify(a))}function w(e,t){let n=document.getElementsByClassName("bookmark");bc=bc!=e?e:"#333";for(let l=n.length;l--;)n[l].removeEventListener("click",db),n[l].removeEventListener("click",mb),n[l].style.background=bc,t&&bc==e&&n[l].addEventListener("click",t)}document.addEventListener("DOMContentLoaded",function(e){const t=document.getElementById.bind(document);var n,l;window.location.origin.startsWith("chrome-extens")?(n="2",l=chrome.storage.sync):window.location.origin.startsWith("moz-extens")&&(n="unfiled_____",l=browser.storage.sync),void 0!==n&&(chrome.sessions.getRecentlyClosed(q),chrome.topSites.get(q),chrome.bookmarks.getSubTree(n,function(e){let t=e[0].children;q(t.find(e=>"m"==e.title).children),q(t.find(e=>"a"==e.title).children)}));let a=e=>{let n=localStorage.getItem("quick-links");n?x(JSON.parse(n)):(localStorage.setItem("quick-links",JSON.stringify(e.quickLinks)),x(e.quickLinks)),linksArrayLen=e.slowLinks.length;for(let t=0;t<linksArrayLen;q(e.slowLinks[t++]));const a=t("feeds");var o=()=>{this.removeEventListener("toggle",o);if(l)l.get(["lastcheck","feeds"],e=>{for(n in e.feeds)lf(n,e.feeds[n],a,e.lastcheck)}),l.set({lastcheck:new Date});else{const e=JSON.parse(localStorage.getItem("feeds")),t=localStorage.getItem("lastcheck");for(n in e)lf(n,e[n],a,t);localStorage.setItem("lastcheck",new Date)}};a.addEventListener("toggle",o)};var o=e=>{e.staticLinks?a(e.staticLinks):rf("links.json","application/json",e=>{z=e.responseText,parsed=JSON.parse(z),l?l.set({staticLinks:parsed,feeds:{}}):(localStorage.setItem("staticLinks",z),localStorage.setItem("feeds","{}")),a(parsed)})};l?l.get("staticLinks",o):o({staticLinks:JSON.parse(localStorage.getItem("staticLinks"))}),t("quick-links-add").addEventListener("click",e=>{w("#333");let n=t("bookmark-form"),l=t("quick-links-add").getBoundingClientRect().top;n.style.top=l.toString()+"px",n.style.display="block"!=n.style.display?"block":"none"}),t("bookmark-form").addEventListener("submit",ab),t("quick-links-move").addEventListener("click",e=>{w("darkblue",mb)}),t("quick-links-del").addEventListener("click",e=>{w("darkred",db)}),t("feeds-add").addEventListener("click",e=>{let n=t("feed-form"),l=t("feeds-add").getBoundingClientRect().top+20;n.style.top=l.toString()+"px",n.style.display="block"!=n.style.display?"block":"none"}),t("feed-form").addEventListener("submit",e=>{e.preventDefault();let n=e.target,a=n.querySelector('[name="name"]').value,o=n.querySelector('[name="url"]').value,r=n.querySelector('[name="regex"]').value,i=n.querySelector('[name="prefix"]').value;var s=[o];if(r&&s.push(r),i&&s.push(i),l)l.get("feeds",e=>{e.feeds[a]=s,l.set({feeds:e.feeds})});else{let e=JSON.parse(localStorage.getItem("feeds"));e[a]=s,localStorage.setItem("feeds",JSON.stringify(e))}t("feed-form").style.display="none"}),t("feeds-del").addEventListener("click",e=>{const n=t("feednames"),a=n.lastChild;var o;a.textContent="";var r=e=>{li=a.appendChild(document.createElement("li")),li.appendChild(document.createTextNode(e))};if(l)o=(e=>{l.get("feeds",t=>{delete t.feeds[e.target.textContent],l.set({feeds:t.feeds})}),n.style.display="none"}),l.get("feeds",e=>{for(name in e.feeds)r(name)});else for(name in o=(e=>{let t=JSON.parse(localStorage.getItem("feeds"));t.pop(obj),localStorage.setItem("feeds",JSON.stringify(t)),n.style.display="none"}),parsed=JSON.parse(localStorage.getItem("feeds")),parsed)r(name);a.addEventListener("click",o),n.style.display="block"!=n.style.display?"block":"none"});const r=t("noteSection");if(r.hidden=!localStorage.getItem("showNotes"),t("btn-toggle-notes").innerHTML=r.hidden?"&#x25BD;":"&#x25B3;",r.children[0].value=localStorage.getItem("localnotes"),l)l.get(e=>{for(var t=r.children.length;t-->1;){var n="notes"+t;e[n]||(e[n]=localStorage.getItem(n)),r.children[t].value=e[n]}});else for(var i=r.children.length;i-->1;)r.children[i].value=localStorage.getItem("notes"+i);var s=()=>{localStorage.setItem("localnotes",r.children[0].value);for(var e=r.children.length;e-->1;){var t="notes"+e,n=r.children[e].value;void 0!==l?l.set({[t]:n}):localStorage.setItem(t,n)}},d=e=>{r.style.height="100%";var t=parseInt(sessionStorage.getItem("notesview"));if(isNaN(t)||4==t||e.altKey){for(var n=r.children.length;n--;)r.children[n].hidden=!1,r.children[n].style.width="49%",r.children[n].style.height="40%";t=0}else{for(n=r.children.length;n--;)t!=n&&(r.children[n].hidden=!0);let e=r.children[t++];e.hidden=!1,e.style.width="100%",e.style.height="100%",e.scrollIntoView(!0)}sessionStorage.setItem("notesview",t)},c=()=>{r.hidden?(r.hidden=!1,localStorage.setItem("showNotes",1),t("btn-toggle-notes").innerHTML="&#x25B3;"):(r.hidden=!0,localStorage.setItem("showNotes",""),t("btn-toggle-notes").innerHTML="&#x25BD;")};t("btn-save-notes").addEventListener("click",s),t("btn-resize-notes").addEventListener("click",d),t("btn-toggle-notes").addEventListener("click",c),window.addEventListener("keydown",e=>{e.ctrlKey&&"s"==e.key?(e.preventDefault(),s()):e.altKey&&"q"==e.key?(e.preventDefault(),d({altKey:!1})):e.altKey&&"w"==e.key?(e.preventDefault(),d({altKey:!0})):e.altKey&&40==e.keyCode&&(e.preventDefault(),c())});var m=t("searchForm"),k=m.children[0];m.addEventListener("click",function(e){if(e.target.name){let n=e.target.name.split("&");for(var t=0;t<n.length-1;t++){let e=n[t].split("="),l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name",e[0]),l.setAttribute("value",e[1]),m.appendChild(l)}k.name=n[t]}else k.name="q";m.target=e.ctrlKey?"_blank":"_self"});var u=t("sidebar");document.addEventListener("mousemove",e=>{if(e.altKey)return;let t=u.style.display,n=u.offsetWidth,l=window.innerWidth,a=e.clientX;u.style.display=e.clientY>5&&(l-a<20||t&&l-n-a<0)?"flex":"none"}),k.focus()});